<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>JSONP hateb</title>
<script type="text/javascript">
<!--
function search() {
    var url = "http://b.hatena.ne.jp/entry/jsonlite/?callback=show&url=" + encodeURIComponent(document.fm.url.value);
    var scr = document.createElement('script');
    scr.type = 'text/javascript';
    scr.src = url;
    document.getElementsByTagName('body').item(0).appendChild(scr);
}

function show(data) {
    var count = document.getElementById('count');
    var  result =document.getElementById('result');
    result.innerHTML = '';

    if (data == null) {
        count.innerHTML = 0;
    } else {
        count.innerHTML = data.count;
        var ul = document.createElement('ul');
        for (var i = 0; i < data.bookmarks.length; i++) {
            var bm = data.bookmarks[ i ];
            var li =document.createElement('li');
            var anchor = document.createElement('a');
            anchor.href = 'http://b.hatena.ne.jp/' + bm.user
            var text = document.createTextNode(bm.user + ' ' + bm.timestamp);
            anchor.appendChild(text);
            li.appendChild(anchor);
            ul.appendChild(li);
        }

        var result = document.getElementById('result');
        result.appendChild(ul);
    }
}
-->
</script>
<style type="text/css">
#content {
    width:  800px;
    margin: 40px auto;
}
#result {
    border-top :solid 1px #ddd;
    padding: 15px 0;
    margin: 15px 0 ;
}
form {
    padding: 40px 0;
}
input[type="text"] {
    padding: 8px;
    font-size: 14px;
    border: solid 2px #ddd;
    margin: 0 1em;
}
input[type="button"] {
    padding: 10px;
    border: none;
    font-size: 14px;
    color: #fff;
    background-color: #333;
}
</style>
</head>
<body>

<div id="content">

<form name="fm">
    <label>URL  <input type="text" name="url" value="" size="65"></label>
    <input type="button" id="disp" value="SEARCH" onclick="search()">
</form>

<span id="count"> - </span>件、ブックマークされています。
<div id="result"></div>

</div>

</body>
</html>